# إضافة حلقات جديدة - دليل سريع

## الطرق الثلاث لإضافة حلقة

### ✅ الطريقة 1: عبر واجهة الويب (الأسهل)

1. قم بتسجيل الدخول كمسؤول: `admin@showtv.com / admin123`
2. اذهب إلى **الإدارة > إضافة حلقة جديدة** أو زر إلى: `http://127.0.0.1:8000/admin/episodes/create`
3. ملء النموذج:
   - **المسلسل**: اختر اسم المسلسل من القائمة
   - **عنوان الحلقة**: مثل "الحلقة 1 - البداية"
   - **وصف الحلقة**: وصف قصير للحلقة
   - **المدة**: عدد الدقائق (مثل 45)
   - **وقت البث**: متى تُبث (مثل "الاثنين @ 8:00 مساءً")
   - **معرف فيديو يوتيوب** (الأسهل): أدخل رقم الفيديو فقط (مثل `dQw4w9WgXcQ`)
     - أو **رابط الفيديو الكامل**: `https://www.youtube.com/embed/VIDEO_ID`
   - **صورة مصغرة** (اختياري): ارفع صورة من جهازك
     - إذا لم ترفع صورة، سيتم استخدام صورة يوتيوب تلقائياً

4. اضغط **إضافة الحلقة**

---

### ✅ الطريقة 2: عبر سطر الأوامر (CLI) - السريع

إذا كان لديك رقم المسلسل، استخدم هذا الأمر:

```bash
cd /home/eyadhs/Downloads/SHOW.TV_f/showtv_complete/showtv

php artisan episode:add-youtube 1 "الحلقة 1 - البداية" dQw4w9WgXcQ \
  --description="وصف الحلقة هنا" \
  --duration=45 \
  --airing_time="الاثنين @ 8:00 مساءً"
```

**شرح المعاملات:**
- `1` = رقم المسلسل (Show ID)
- `"الحلقة 1 - البداية"` = عنوان الحلقة
- `dQw4w9WgXcQ` = معرف فيديو يوتيوب (بدون `https://`)

**الخيارات الإضافية:**
- `--description="..."` = وصف الحلقة (اختياري)
- `--duration=45` = المدة بالدقائق (افتراضي: 45)
- `--airing_time="..."` = وقت البث (افتراضي: Monday @ 8:00 PM)

**أمثلة:**
```bash
# مثال بسيط
php artisan episode:add-youtube 1 "Episode 2" kJQP7kiw5Fk

# مثال كامل
php artisan episode:add-youtube 2 "الحلقة 1 - البداية" 9bZkp7q19f0 \
  --description="بداية مثيرة للقصة" \
  --duration=50 \
  --airing_time="الثلاثاء @ 9:00 مساءً"
```

---

### ✅ الطريقة 3: رفع فيديو محلي (MP4)

1. اتبع نفس خطوات **الطريقة 1**
2. بدلاً من إدخال **معرف يوتيوب**، اختر **رفع ملف فيديو (MP4)**
3. الملف سيُحفظ في `storage/app/public/videos/`
4. اضغط **إضافة الحلقة**

**ملاحظة**: حجم الملف الأقصى: 512 MB

---

## كيفية الحصول على معرف فيديو يوتيوب

**من رابط YouTube:**
- الرابط: `https://www.youtube.com/watch?v=dQw4w9WgXcQ`
- المعرف: `dQw4w9WgXcQ` (الجزء بعد `v=`)

**من رابط مختصر:**
- الرابط: `https://youtu.be/dQw4w9WgXcQ`
- المعرف: `dQw4w9WgXcQ` (الجزء في النهاية)

---

## التحقق من المسلسلات والحلقات

### عرض جميع المسلسلات:
```bash
# عبر الويب
http://127.0.0.1:8000/shows

# أو عبر Laravel Tinker
php artisan tinker
>>> App\Models\Show::all()
```

### عرض حلقات مسلسل معين:
```bash
php artisan tinker
>>> App\Models\Show::find(1)->episodes
```

### عرض آخر 5 حلقات في الصفحة الرئيسية:
```
http://127.0.0.1:8000/
```

---

## استكشاف الأخطاء

### الخطأ: "Show with ID X not found"
**الحل**: تأكد من وجود المسلسل أولاً:
```bash
php artisan tinker
>>> App\Models\Show::all()
```

### الصورة المصغرة لا تظهر
**الحل**: يوتيوب قد لا يوفر صورة لكل فيديو. ارفع صورتك الخاصة في خطوة **الصورة المصغرة**.

### الفيديو لا يشتغل
**الحل**: تحقق:
1. معرف يوتيوب صحيح
2. الفيديو متاح على يوتيوب (ليس محذوفاً)
3. الفيديو ليس محدوداً جغرافياً

---

## الصيغ المدعومة

| النوع | مثال |
|------|------|
| معرف يوتيوب | `dQw4w9WgXcQ` |
| رابط embed | `https://www.youtube.com/embed/dQw4w9WgXcQ` |
| ملف محلي MP4 | اختر من جهازك |

---

## المتطلبات المطلوبة عند الإضافة

✅ **المطلوب:**
- المسلسل (يجب أن يكون موجوداً)
- عنوان الحلقة
- وصف الحلقة

✅ **اختياري:**
- معرف يوتيوب أو رابط الفيديو
- صورة مصغرة
- المدة والوقت

---

## أوامر مفيدة أخرى

```bash
# حذف حلقة
php artisan tinker
>>> App\Models\Episode::find(ID)->delete()

# تحديث حلقة
>>> $ep = App\Models\Episode::find(ID)
>>> $ep->update(['title' => 'عنوان جديد'])

# عد الحلقات
>>> App\Models\Episode::count()

# عد المسلسلات
>>> App\Models\Show::count()
```

---

## أسئلة شائعة

**س: هل يمكن تعديل حلقة بعد إضافتها؟**
ج: نعم، اذهب إلى **الإدارة > الحلقات** واضغط تعديل.

**س: هل يمكن حذف حلقة؟**
ج: نعم، من قائمة الحلقات اضغط حذف.

**س: كم عدد الحلقات التي يمكن إضافتها؟**
ج: بلا حد، طالما المسلسل موجود.

**س: هل الصورة المصغرة مطلوبة؟**
ج: لا، إذا لم تُرفع، سيتم استخدام صورة يوتيوب تلقائياً.

---

**آخر تحديث**: 16 ديسمبر 2025
